<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
</head>
<body>
    <h1>Welcome to your Dashboard</h1>
    <p>You are logged in as {{ email }}</p>

    <h2>Your Petitions</h2>
    <ul>
        {% for petition in petitions %}
            <li>
                <strong>{{ petition.title }}</strong> - {{ petition.status }}
                <br>
                {{ petition.content }}
                <br>
                Signatures: {{ petition.signatures }}
                {% if petition.response %}
                    <br>
                    <em>Response: {{ petition.response }}</em>
                {% endif %}
            </li>
        {% empty %}
            <p>You have not created any petitions yet.</p>
        {% endfor %}
    </ul>

    <h2>Create a New Petition</h2>
        <form method="post" action="/create-petition/">
            {% csrf_token %}
            <label>Title:</label>
            <input type="text" name="title" required><br>
            <label>Content:</label>
            <textarea name="content" required></textarea><br>
            <button type="submit">Create Petition</button>
        </form>

        <h2>Open Petitions to Sign</h2>
        <ul>
            {% for petition in open_petitions %}
                <li>
                    <strong>{{ petition.title }}</strong>
                    <br>
                    {{ petition.content }}
                    <br>
                    Signatures: {{ petition.signatures }}
                    <form method="post" action="/sign-petition/">
                        {% csrf_token %}
                        <input type="hidden" name="petition_id" value="{{ petition.id }}">
                        <button type="submit">Sign Petition</button>
                    </form>
                </li>
            {% empty %}
                <p>No open petitions available for signing.</p>
            {% endfor %}
        </ul>

    <a href="/logout/">Logout</a>
</body>
</html>